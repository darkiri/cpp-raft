import os
Import('env')

proto_files = env.Protoc(
    [os.path.splitext('proto/raft.proto')[0] + '.pb.cc'],
    ['proto/raft.proto'],
    PROTOCPROTOPATH = ["build/raft/proto"],
    PROTOCPYTHONOUTDIR = None,
    PROTOCOUTDIR = "build/raft/proto",
)
raft_o = env.StaticObject(
        ["node.cpp", "log.cpp", "proto/raft.pb.cc"])

Depends(raft_o, proto_files)

env.StaticLibrary("raft", source = raft_o)

